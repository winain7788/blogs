<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Installation Guideline | Hello VuePress</title>
    <meta name="description" content="Just playing around">
    
    
    <link rel="preload" href="blogs/assets/css/0.styles.4cfe90f6.css" as="style"><link rel="preload" href="blogs/assets/js/app.2bc12afc.js" as="script"><link rel="preload" href="blogs/assets/js/3.2262fedd.js" as="script"><link rel="prefetch" href="blogs/assets/js/2.7974f97d.js"><link rel="prefetch" href="blogs/assets/js/4.0841cf35.js">
    <link rel="stylesheet" href="blogs/assets/css/0.styles.4cfe90f6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blogs/" class="home-link router-link-exact-active router-link-active"><!----> <span class="site-name">Hello VuePress</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <!----> </div> <div class="page"> <div class="content"><h1 id="installation-guideline"><a href="#installation-guideline" aria-hidden="true" class="header-anchor">#</a> Installation Guideline</h1> <h2 id="os-prerequiste-tasks"><a href="#os-prerequiste-tasks" aria-hidden="true" class="header-anchor">#</a> OS Prerequiste Tasks</h2> <p>This case refers to &quot;Linux - Ubuntu 18LTS&quot;.</p> <ol><li>Install docker and docker-compose. The command will be different if you use another Linux distribution.</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> apt update
<span class="token function">sudo</span> apt upgrade
<span class="token function">sudo</span> apt <span class="token function">install</span> docker.io docker-compose
</code></pre></div><ol start="2"><li>Create &quot;docker&quot; user and also add your current user to docker group. This will make your login user able to execute &quot;docker&quot; and &quot;docker-compose&quot; commands.</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> adduser --uid 116 --disabled-login --ingroup docker docker -q
<span class="token function">sudo</span> <span class="token function">usermod</span> -a -G docker <span class="token variable">$USER</span>
<span class="token function">sudo</span> chfn -o umask<span class="token operator">=</span>007 docker
<span class="token function">sudo</span> <span class="token function">chmod</span> -R g+w /home/docker
</code></pre></div><ol start="3"><li>Clone &quot;docker-redmine&quot; project from GitHub.</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cd</span> /home/docker
<span class="token function">git</span> clone https://github.com/winain7788/docker-redmine.git
<span class="token function">cd</span> docker-redmine/
</code></pre></div><h2 id="network-and-domain-configurations"><a href="#network-and-domain-configurations" aria-hidden="true" class="header-anchor">#</a> Network and Domain Configurations</h2> <p>In this case, we will use <a href="https://letsencrypt.org/getting-started/" target="_blank" rel="noopener noreferrer">Let's Encrypt SSL<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. You will need to configure your domain name properly to proceed further steps.</p> <ol><li>Add your domain to your DNS service, for example - &quot;redmine.yourcompany.com&quot;. You will also need to add &quot;www.redmine.yourcompany.com&quot; to your DNS configuration, otherwise certbot will fail to verify your domain name.</li> <li>Verify your configuration using &quot;nslookup&quot;.</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">nslookup</span> redmine.yourcompany.com
<span class="token function">nslookup</span> www.redmine.yourcompany.com
</code></pre></div><h2 id="edit-docker-compose-yml-file"><a href="#edit-docker-compose-yml-file" aria-hidden="true" class="header-anchor">#</a> Edit docker-compose.yml File</h2> <p>This step will tell you how to initialise docker-compose.yml file to specify your database password and your customised configurations e.g. email server.</p> <ol><li>Open docker-compose.yml file using your prefer editor and specify your prefer password for database.</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>line 11      - REDMINE_DB_PASSWORD<span class="token operator">=</span>your-password
line 23      - MYSQL_ROOT_PASSWORD<span class="token operator">=</span>your-password
</code></pre></div><ol start="2"><li>Create Redmine configuration file from the template.</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cd</span> redmin/config
<span class="token function">cp</span> configuration.yml.example configuration.yml
</code></pre></div><ol start="3"><li>You may configure outgoing emails server for your Redmine server. In this case, we use mailgun for example as below.</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># default configuration options for all environments</span>
default:
  <span class="token comment"># Outgoing emails configuration</span>
  <span class="token comment"># See the examples below and the Rails guide for more configuration options:</span>
  <span class="token comment"># http://guides.rubyonrails.org/action_mailer_basics.html#action-mailer-configuration</span>
  email_delivery:
    delivery_method: :smtp
    smtp_settings:

      address: <span class="token string">&quot;smtp.mailgun.org&quot;</span>
      port: 2525
      domain: <span class="token string">'yourcompany.com'</span>
      authentication: :login
      user_name: <span class="token string">'postmaster@yourcompany
      password: '</span>your-mail-gun-key'
</code></pre></div><h2 id="ssl-certificates"><a href="#ssl-certificates" aria-hidden="true" class="header-anchor">#</a> SSL Certificates</h2> <ol><li>Now you are ready to generate your SSL certificate for your server. Execute the command below.</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>./letsencrypt/letsencrypt-init.sh redmine.yourcompany.com
</code></pre></div><ol start="2"><li>You will need to enter your email address as your will recieve a notification when your certificate is nearly expired. Then you agree with the terms of serve and you may say no to receive any further email.</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>Enter email address <span class="token punctuation">(</span>used <span class="token keyword">for</span> urgent renewal and security notices<span class="token punctuation">)</span> <span class="token punctuation">(</span>Enter <span class="token string">'c'</span> to
cancel<span class="token punctuation">)</span>: your email

-------------------------------------------------------------------------------
Please <span class="token function">read</span> the Terms of Service at
https://letsencrypt.org/documents/LE-SA-v1.1.1-August-1-2016.pdf. You must agree
<span class="token keyword">in</span> order to register with the ACME server at
https://acme-v01.api.letsencrypt.org/directory
-------------------------------------------------------------------------------
<span class="token punctuation">(</span>A<span class="token punctuation">)</span>gree/<span class="token punctuation">(</span>C<span class="token punctuation">)</span>ancel: A

-------------------------------------------------------------------------------
Would you be willing to share your email address with the Electronic Frontier
Foundation, a founding partner of the Let<span class="token string">'s Encrypt project and the non-profit
organization that develops Certbot? We'</span>d like to send you email about EFF and
our work to encrypt the web, protect its <span class="token function">users</span> and defend digital rights.
-------------------------------------------------------------------------------
<span class="token punctuation">(</span>Y<span class="token punctuation">)</span>es/<span class="token punctuation">(</span>N<span class="token punctuation">)</span>o: N
</code></pre></div><ol start="3"><li>The you will see this message, which you will need to copy the text to update your webserver configuration files.</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>Obtaining a new certificate
Performing the following challenges:
http-01 challenge <span class="token keyword">for</span> redmine.yourcompany.com
http-01 challenge <span class="token keyword">for</span> www.redmine.yourcompany.com
Using the webroot path /data/letsencrypt <span class="token keyword">for</span> all unmatched domains.
Waiting <span class="token keyword">for</span> verification<span class="token punctuation">..</span>.
Cleaning up challenges
<span class="token punctuation">..</span>.
INFO: update the nginx/proxy_ssl.conf <span class="token function">file</span>
-  4:   server_name example.com<span class="token punctuation">;</span>
- 19:   server_name               yourcompany.com www.yourcompany.com<span class="token punctuation">;</span>
- 40:   ssl_certificate           /etc/letsencrypt/live/yourcompany.com/fullchain.pem<span class="token punctuation">;</span>
- 41:   ssl_certificate_key       /etc/letsencrypt/live/yourcompany.com/privkey.pem<span class="token punctuation">;</span>
- 42:   ssl_trusted_certificate   /etc/letsencrypt/live/yourcompany.com/chain.pem<span class="token punctuation">;</span>
</code></pre></div><h2 id="webserver-configurations"><a href="#webserver-configurations" aria-hidden="true" class="header-anchor">#</a> Webserver Configurations</h2> <ol><li>You will need to create a webserver configuration file by copying from the template.</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cd</span> nginx
<span class="token function">cp</span> proxy_ssl.conf_example proxy_ssl.conf
</code></pre></div><ol start="2"><li><p>Then edit the webserver configuration file - &quot;proxy_ssl.conf&quot; using any editor. Replace the server name and key files using the information from step 3 in SSL section. You will need to replace the value in line 60, 81, 82 and 83 using the same information from line 19, 40, 41 and 42.</p></li> <li><p>Now your Redmine configuration should be ready to start using the commands below.</p></li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>docker-compose stop
docker-compose up -d
docker-compose <span class="token function">ps</span>
</code></pre></div><p>If you need a fresh Redmine installation, you are done now. However, you will need to proceed one more step below if you need to migrate your data from another Redmine instance.</p> <h2 id="database-migration"><a href="#database-migration" aria-hidden="true" class="header-anchor">#</a> Database Migration</h2> <ol><li>Backup your data from previous Redmine instance. Please refer to <a href="https://www.redmine.org/projects/redmine/wiki/RedmineBackupRestore" target="_blank" rel="noopener noreferrer">Redmine Wiki<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for details.</li> <li>Once you have your backup in hands. In this case, we use filename  &quot;backup-migrate.sql&quot;. Put your &quot;backup-migrate.sql&quot; in &quot;docker-redmine/mysql&quot; folder then you are now ready to proceed migration.</li> <li>Enter the shell of database and execute the commands below. You will need to enter your database password from &quot;Edit docker-compose.yml File&quot; section.</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>
docker <span class="token function">exec</span> -it mariadb <span class="token function">bash</span>
<span class="token function">cd</span> /var/lib/mysql
mysql -u root -p -D redmine <span class="token operator">&lt;</span> backup-migrate.sql
<span class="token keyword">exit</span>
</code></pre></div><ol start="3"><li>Stop and start Redmine service again.</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>docker-compose stop
docker-compose up -d
docker-compose <span class="token function">ps</span>
</code></pre></div><h2 id="service-access"><a href="#service-access" aria-hidden="true" class="header-anchor">#</a> Service Access</h2> <ol><li>Redmine Service URL</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>https://redmine.yourcompany.com
</code></pre></div><ol start="2"><li>Database Admin URL</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>https://redmine.yourcompany.com:8443
</code></pre></div><ol start="3"><li>Make sure that you have configure your firewall properly to access these services (port 80, 443 and 8443).</li></ol></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="blogs/assets/js/app.2bc12afc.js" defer></script><script src="blogs/assets/js/3.2262fedd.js" defer></script>
  </body>
</html>
