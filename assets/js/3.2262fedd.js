(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{169:function(e,t,s){"use strict";s.r(t);var a=s(0),n=Object(a.a)({},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[e._m(0),e._v(" "),e._m(1),e._v(" "),s("p",[e._v('This case refers to "Linux - Ubuntu 18LTS".')]),e._v(" "),e._m(2),e._v(" "),e._m(3),e._m(4),e._v(" "),e._m(5),e._m(6),e._v(" "),e._m(7),e._m(8),e._v(" "),s("p",[e._v("In this case, we will use "),s("a",{attrs:{href:"https://letsencrypt.org/getting-started/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Let's Encrypt SSL"),s("OutboundLink")],1),e._v(". You will need to configure your domain name properly to proceed further steps.")]),e._v(" "),e._m(9),e._v(" "),e._m(10),e._m(11),e._v(" "),s("p",[e._v("This step will tell you how to initialise docker-compose.yml file to specify your database password and your customised configurations e.g. email server.")]),e._v(" "),e._m(12),e._v(" "),e._m(13),e._m(14),e._v(" "),e._m(15),e._m(16),e._v(" "),e._m(17),e._m(18),e._v(" "),e._m(19),e._v(" "),e._m(20),e._m(21),e._v(" "),e._m(22),e._m(23),e._v(" "),e._m(24),e._m(25),e._v(" "),e._m(26),e._v(" "),e._m(27),e._m(28),e._v(" "),e._m(29),s("p",[e._v("If you need a fresh Redmine installation, you are done now. However, you will need to proceed one more step below if you need to migrate your data from another Redmine instance.")]),e._v(" "),e._m(30),e._v(" "),s("ol",[s("li",[e._v("Backup your data from previous Redmine instance. Please refer to "),s("a",{attrs:{href:"https://www.redmine.org/projects/redmine/wiki/RedmineBackupRestore",target:"_blank",rel:"noopener noreferrer"}},[e._v("Redmine Wiki"),s("OutboundLink")],1),e._v(" for details.")]),e._v(" "),s("li",[e._v('Once you have your backup in hands. In this case, we use filename  "backup-migrate.sql". Put your "backup-migrate.sql" in "docker-redmine/mysql" folder then you are now ready to proceed migration.')]),e._v(" "),s("li",[e._v('Enter the shell of database and execute the commands below. You will need to enter your database password from "Edit docker-compose.yml File" section.')])]),e._v(" "),e._m(31),e._m(32),e._v(" "),e._m(33),e._m(34),e._v(" "),e._m(35),e._v(" "),e._m(36),e._m(37),e._v(" "),e._m(38),e._m(39)])},[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"installation-guideline"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#installation-guideline","aria-hidden":"true"}},[this._v("#")]),this._v(" Installation Guideline")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"os-prerequiste-tasks"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#os-prerequiste-tasks","aria-hidden":"true"}},[this._v("#")]),this._v(" OS Prerequiste Tasks")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",[t("li",[this._v("Install docker and docker-compose. The command will be different if you use another Linux distribution.")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" apt update\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" apt upgrade\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" apt "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" docker.io docker-compose\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"2"}},[t("li",[this._v('Create "docker" user and also add your current user to docker group. This will make your login user able to execute "docker" and "docker-compose" commands.')])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" adduser --uid 116 --disabled-login --ingroup docker docker -q\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("usermod")]),e._v(" -a -G docker "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$USER")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" chfn -o umask"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("007 docker\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("chmod")]),e._v(" -R g+w /home/docker\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"3"}},[t("li",[this._v('Clone "docker-redmine" project from GitHub.')])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[this._v("cd")]),this._v(" /home/docker\n"),t("span",{pre:!0,attrs:{class:"token function"}},[this._v("git")]),this._v(" clone https://github.com/winain7788/docker-redmine.git\n"),t("span",{pre:!0,attrs:{class:"token function"}},[this._v("cd")]),this._v(" docker-redmine/\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"network-and-domain-configurations"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#network-and-domain-configurations","aria-hidden":"true"}},[this._v("#")]),this._v(" Network and Domain Configurations")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",[t("li",[this._v('Add your domain to your DNS service, for example - "redmine.yourcompany.com". You will also need to add "www.redmine.yourcompany.com" to your DNS configuration, otherwise certbot will fail to verify your domain name.')]),this._v(" "),t("li",[this._v('Verify your configuration using "nslookup".')])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[this._v("nslookup")]),this._v(" redmine.yourcompany.com\n"),t("span",{pre:!0,attrs:{class:"token function"}},[this._v("nslookup")]),this._v(" www.redmine.yourcompany.com\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"edit-docker-compose-yml-file"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#edit-docker-compose-yml-file","aria-hidden":"true"}},[this._v("#")]),this._v(" Edit docker-compose.yml File")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",[t("li",[this._v("Open docker-compose.yml file using your prefer editor and specify your prefer password for database.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("line 11      - REDMINE_DB_PASSWORD"),t("span",{pre:!0,attrs:{class:"token operator"}},[this._v("=")]),this._v("your-password\nline 23      - MYSQL_ROOT_PASSWORD"),t("span",{pre:!0,attrs:{class:"token operator"}},[this._v("=")]),this._v("your-password\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"2"}},[t("li",[this._v("Create Redmine configuration file from the template.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[this._v("cd")]),this._v(" redmin/config\n"),t("span",{pre:!0,attrs:{class:"token function"}},[this._v("cp")]),this._v(" configuration.yml.example configuration.yml\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"3"}},[t("li",[this._v("You may configure outgoing emails server for your Redmine server. In this case, we use mailgun for example as below.")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# default configuration options for all environments")]),e._v("\ndefault:\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Outgoing emails configuration")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# See the examples below and the Rails guide for more configuration options:")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# http://guides.rubyonrails.org/action_mailer_basics.html#action-mailer-configuration")]),e._v("\n  email_delivery:\n    delivery_method: :smtp\n    smtp_settings:\n\n      address: "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"smtp.mailgun.org"')]),e._v("\n      port: 2525\n      domain: "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'yourcompany.com'")]),e._v("\n      authentication: :login\n      user_name: "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'postmaster@yourcompany\n      password: '")]),e._v("your-mail-gun-key'\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"ssl-certificates"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ssl-certificates","aria-hidden":"true"}},[this._v("#")]),this._v(" SSL Certificates")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",[t("li",[this._v("Now you are ready to generate your SSL certificate for your server. Execute the command below.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("./letsencrypt/letsencrypt-init.sh redmine.yourcompany.com\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"2"}},[t("li",[this._v("You will need to enter your email address as your will recieve a notification when your certificate is nearly expired. Then you agree with the terms of serve and you may say no to receive any further email.")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("Enter email address "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("used "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("for")]),e._v(" urgent renewal and security notices"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("Enter "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'c'")]),e._v(" to\ncancel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(": your email\n\n-------------------------------------------------------------------------------\nPlease "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("read")]),e._v(" the Terms of Service at\nhttps://letsencrypt.org/documents/LE-SA-v1.1.1-August-1-2016.pdf. You must agree\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("in")]),e._v(" order to register with the ACME server at\nhttps://acme-v01.api.letsencrypt.org/directory\n-------------------------------------------------------------------------------\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("A"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("gree/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("C"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("ancel: A\n\n-------------------------------------------------------------------------------\nWould you be willing to share your email address with the Electronic Frontier\nFoundation, a founding partner of the Let"),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'s Encrypt project and the non-profit\norganization that develops Certbot? We'")]),e._v("d like to send you email about EFF and\nour work to encrypt the web, protect its "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("users")]),e._v(" and defend digital rights.\n-------------------------------------------------------------------------------\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("Y"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("es/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("N"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("o: N\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"3"}},[t("li",[this._v("The you will see this message, which you will need to copy the text to update your webserver configuration files.")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("Obtaining a new certificate\nPerforming the following challenges:\nhttp-01 challenge "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("for")]),e._v(" redmine.yourcompany.com\nhttp-01 challenge "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("for")]),e._v(" www.redmine.yourcompany.com\nUsing the webroot path /data/letsencrypt "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("for")]),e._v(" all unmatched domains.\nWaiting "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("for")]),e._v(" verification"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(".\nCleaning up challenges\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(".\nINFO: update the nginx/proxy_ssl.conf "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("file")]),e._v("\n-  4:   server_name example.com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n- 19:   server_name               yourcompany.com www.yourcompany.com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n- 40:   ssl_certificate           /etc/letsencrypt/live/yourcompany.com/fullchain.pem"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n- 41:   ssl_certificate_key       /etc/letsencrypt/live/yourcompany.com/privkey.pem"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n- 42:   ssl_trusted_certificate   /etc/letsencrypt/live/yourcompany.com/chain.pem"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"webserver-configurations"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webserver-configurations","aria-hidden":"true"}},[this._v("#")]),this._v(" Webserver Configurations")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",[t("li",[this._v("You will need to create a webserver configuration file by copying from the template.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[this._v("cd")]),this._v(" nginx\n"),t("span",{pre:!0,attrs:{class:"token function"}},[this._v("cp")]),this._v(" proxy_ssl.conf_example proxy_ssl.conf\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"2"}},[t("li",[t("p",[this._v('Then edit the webserver configuration file - "proxy_ssl.conf" using any editor. Replace the server name and key files using the information from step 3 in SSL section. You will need to replace the value in line 60, 81, 82 and 83 using the same information from line 19, 40, 41 and 42.')])]),this._v(" "),t("li",[t("p",[this._v("Now your Redmine configuration should be ready to start using the commands below.")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("docker-compose stop\ndocker-compose up -d\ndocker-compose "),t("span",{pre:!0,attrs:{class:"token function"}},[this._v("ps")]),this._v("\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"database-migration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#database-migration","aria-hidden":"true"}},[this._v("#")]),this._v(" Database Migration")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("\ndocker "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("exec")]),e._v(" -it mariadb "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("bash")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("cd")]),e._v(" /var/lib/mysql\nmysql -u root -p -D redmine "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v(" backup-migrate.sql\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("exit")]),e._v("\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"3"}},[t("li",[this._v("Stop and start Redmine service again.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("docker-compose stop\ndocker-compose up -d\ndocker-compose "),t("span",{pre:!0,attrs:{class:"token function"}},[this._v("ps")]),this._v("\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"service-access"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#service-access","aria-hidden":"true"}},[this._v("#")]),this._v(" Service Access")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",[t("li",[this._v("Redmine Service URL")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("https://redmine.yourcompany.com\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"2"}},[t("li",[this._v("Database Admin URL")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("https://redmine.yourcompany.com:8443\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"3"}},[t("li",[this._v("Make sure that you have configure your firewall properly to access these services (port 80, 443 and 8443).")])])}],!1,null,null,null);t.default=n.exports}}]);